PUSHS ""
PUSHI 0
START
PUSHS "Introduza uma string binária:"
WRITES
WRITELN
READ
STOREG 3


PUSHG 3
PUSHA BinToInt
CALL
STOREG 4
PUSHS "O valor inteiro correspondente é: "
WRITES
WRITELN
PUSHG 4
WRITEI
STOP

BinToInt:
PUSHI 0
PUSHI 0
PUSHI 0PUSHI 0
STOREG 1
PUSHI 1
STOREG 2


PUSHFP
LOAD -1
STRLEN
STOREG 0
PUSHI 10
PUSHI 1
SUB
FORSTART0:
PUSHL 0
PUSHG 0
EQUAL
NOT
JZ FOREND0
PUSHI 1
JZ ELSE1

PUSHG 1

PUSHG 2
ADD
STOREG 1
JUMP ENDIF1
ELSE1:


ENDIF1:

PUSHG 2
PUSHI 2
MUL
STOREG 2
PUSHG 0
PUSHI 1
SUB
STOREG 0
JUMP FORSTART0
FOREND0:
POP 1


PUSHG 1
RETURN
